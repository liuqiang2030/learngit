package {		public class Composite extends Component {			protected var sName:String;		protected var aChildren:Array;				public function Composite(sName:String) {			this.sName = sName;			this.aChildren = new Array();		}				override public function add(c:Component):void {			aChildren.push(c);			c.setParent(this);		}				override public function operation():void {			trace(this.sName);			for each (var c:Component in aChildren) {				c.operation();			}		}				override public function getChild(n:int):Component { 			if ((n > 0) && (n <= aChildren.length)) {				return aChildren[n-1];			} else {				return null;			}		}				override internal function getComposite():Composite { 			return this;		}				private function safeRemove(c:Component) {			if (c.getComposite()) {				c.remove(c); // composite			} else {				c.removeParentRef();			}		}				override public function remove(c:Component):void {			if (c === this) {				// remove all my children				for (var i:int = 0; i < aChildren.length; i++) {					safeRemove(aChildren[i]); // remove children				}				this.aChildren = []; // remove references to children				this.removeParentRef(); // remove my parent reference			} else {				for (var j:int = 0; j < aChildren.length; j++) {					if (aChildren[j] == c) {						safeRemove(aChildren[j]); // remove child						aChildren.splice(j, 1); // remove reference					}				}			}		}	}}