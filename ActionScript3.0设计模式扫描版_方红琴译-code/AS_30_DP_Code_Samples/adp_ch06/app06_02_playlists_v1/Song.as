package {		import flash.events.*;    import flash.media.Sound;    import flash.media.SoundChannel;    import flash.net.URLRequest;		public class Song extends Component {			private var sName:String;		private var song:Sound;		private static var soundChannel:SoundChannel = new SoundChannel();		private static var aSongQueue:Array = [];		private static var songPlayingFlag:Boolean = false;				public function Song(sName:String) {			this.sName = sName;		}				override public function play():void {			var request:URLRequest = new URLRequest("music/" + sName);			song = new Sound();			song.addEventListener(Event.COMPLETE, songLoaded);			song.addEventListener(IOErrorEvent.IO_ERROR, loadError);			song.load(request);		}				private function songLoaded(event:Event):void {			aSongQueue.push(song);			playIfIdle();		} 				private function loadError(event:Event):void {			trace("Error loading song " + this.sName);		}				private function playDone(event:Event):void {			songPlayingFlag = false;			playIfIdle();		}				private function playIfIdle():void {			if (!songPlayingFlag) {				var s:Sound = aSongQueue.shift();				if (s) {					songPlayingFlag = true;					trace("playing " + s.id3.songName); // get name from ID3 tag					soundChannel = s.play();					soundChannel.addEventListener(Event.SOUND_COMPLETE, this.playDone);				}			}		}	}}